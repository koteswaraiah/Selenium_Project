package stepDefinations;

import io.cucumber.java.en.Given;
import io.cucumber.java.en.Then;
import pages.LoginPage;

import java.time.Duration;
import java.util.List;
import java.util.Set;

import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;

public class LoginSteps {
	
	WebDriver driver = Hook.driver;

    @Given("the user opens the URL {string}")
    public void openURL(String url) {
    	
    	//getTitle
        driver.get(url);
        System.out.println("Navigated to: " + url);
    }

    @Then("perofrm driver operations")
    public void doNothing() throws InterruptedException {
    	
    	//getTitle.
    	String pageTitle = driver.getTitle();   // Get page title
        System.out.println("Page Title: " + pageTitle);
        
        //getCurrentUrl
        String currentUrl = driver.getCurrentUrl();
        System.out.println("Current URL: " + currentUrl);
        
        //getPagesource
        String pageSource = driver.getPageSource();
        System.out.println("Page Source length: " + pageSource.length());
        
     // Find element and Interact 
       String s= driver.findElement(By.xpath("//h5[text() ='Elements']")).getText();
       System.out.println(s);
      //find elements and intract
       List<WebElement> cards = driver.findElements(By.cssSelector(".card-body"));
       System.out.println("Number of cards found: " + cards.size());
       
       // Get the handle of the current window
       String mainWindow = driver.getWindowHandle();
       System.out.println("Main Window Handle: " + mainWindow);
       
       Set<String> allWindows = driver.getWindowHandles();
       System.out.println("size: " + allWindows.size());
       for(String window : allWindows) {
           if(!window.equals(mainWindow)) {
               driver.switchTo().window(window);
               System.out.println("New window title: " + driver.getTitle());
               driver.close(); // Close new window
           }
           
       }
        
       
       // manage function.
       driver.manage().window().minimize();
       driver.manage().window().maximize();
       driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));
       driver.manage().deleteAllCookies();
       
       //navigate

       driver.navigate().to("https://reqres.in/");
       driver.navigate().back();
       driver.navigate().forward();
       driver.navigate().back();
       driver.navigate().refresh();


        
       
    }
    
    LoginPage l = new LoginPage(driver);
    @Then("practice elemnts and locators operation")
    public void practice_elemnts_and_locators_operation() {
    	//driver.findElement(By.xpath("//h5[text() ='Elements']")).click();
    	WebElement ele = driver.findElement(By.xpath("//h5[text()='Elements']"));
    	JavascriptExecutor js = (JavascriptExecutor) driver;
    	js.executeScript("arguments[0].click();", ele);

    	l.enterUser("kote");
    	
       
    }
    
    @Then("Practice radio button, check box and drop downs.")
    public void practice_radio_button_check_box_and_drop_downs() {
    	l.radio_check_drop();
       
        
    }
    
    @Then("Alerts,Frames and windows.")
    public void alerts_frames_and_windows() {
    	l.Alert_window_frames();
    	
       
    }
    
    @Then("DropDowns, WebTables, Screen shot and javscript Exegutor.")
    public void drop_downs_web_tables_screen_shot_and_javscript_exegutor() {
    	driver.navigate().to("https://demoqa.com/automation-practice-form");
     
    }





@Then("do nothing")
public void do_nothing() {
    
}
}
